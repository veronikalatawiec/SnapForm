import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import axios from 'axios';
import Input from '../../components/Input/Input.jsx';
import Button from '../../components/Button/Button.jsx';
import './SignInPage.scss'

export default function SignInPage(){
  const navigate = useNavigate();
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();

    try {
      const response = await axios.post(`${import.meta.env.VITE_API_URL}/users/login`, {
        email,
        password,
      });
      const { token } = response.data;
      console.log(token);
      // Store the JWT 
      localStorage.setItem('token', token);
      navigate('/home'); 
    } catch (err) {
      console.error('Error during sign-in:', err); 
      setError(err);
    }
  };

  return (
    <div className="sign-in__page">
      <div className="sign-in">
        <h2 className="sign-in__head">Sign In</h2>
        <form onSubmit={handleSubmit} className="sign-in__form">
          <Input
            type="email"
            label="Email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            required
            placeholder="Enter your email"
          />
          <Input
            type="password"
            label="Password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            required
            placeholder="Enter your password"
          />
          {error && <p style={{ color: 'red' }}>{error}</p>}
          <Button
            className="btn--primary"
            type="submit"
            text="Sign In"
          />
        </form>
        <div className="sign-in__sign-up">
          <p className="sign-in__text">
            Don't have an account?{' '}
          </p>
          <Button
              className="btn--link"
              onClick={() => navigate('/signup')}
              text="Sign up"
            />
        </div>
      </div>
      <svg className="sign-in__logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="500" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="500" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="3c0fc9921a"><path d="M 99.027344 99.027344 L 276 99.027344 L 276 276 L 99.027344 276 Z M 99.027344 99.027344 " clip-rule="nonzero"/></clipPath><clipPath id="e0df0f1fe5"><path d="M 141.457031 134 L 233 134 L 233 240 L 141.457031 240 Z M 141.457031 134 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#3c0fc9921a)"><path fill="#E1F4F9" d="M 275.964844 187.496094 C 275.964844 188.945312 275.929688 190.390625 275.859375 191.835938 C 275.789062 193.28125 275.679688 194.726562 275.539062 196.167969 C 275.398438 197.609375 275.21875 199.042969 275.007812 200.476562 C 274.792969 201.910156 274.546875 203.335938 274.265625 204.753906 C 273.984375 206.175781 273.664062 207.585938 273.3125 208.992188 C 272.960938 210.394531 272.574219 211.792969 272.15625 213.175781 C 271.734375 214.5625 271.28125 215.9375 270.792969 217.300781 C 270.304688 218.664062 269.785156 220.011719 269.230469 221.351562 C 268.675781 222.6875 268.089844 224.011719 267.472656 225.320312 C 266.851562 226.628906 266.199219 227.921875 265.519531 229.199219 C 264.835938 230.476562 264.121094 231.734375 263.378906 232.976562 C 262.632812 234.21875 261.859375 235.441406 261.054688 236.644531 C 260.25 237.851562 259.417969 239.035156 258.554688 240.195312 C 257.691406 241.359375 256.800781 242.5 255.882812 243.621094 C 254.964844 244.738281 254.019531 245.835938 253.046875 246.90625 C 252.074219 247.980469 251.078125 249.027344 250.054688 250.054688 C 249.027344 251.078125 247.980469 252.074219 246.90625 253.046875 C 245.835938 254.019531 244.738281 254.964844 243.621094 255.882812 C 242.5 256.800781 241.359375 257.691406 240.195312 258.554688 C 239.035156 259.417969 237.851562 260.25 236.644531 261.054688 C 235.441406 261.859375 234.21875 262.632812 232.976562 263.378906 C 231.734375 264.121094 230.476562 264.835938 229.199219 265.519531 C 227.921875 266.199219 226.628906 266.851562 225.320312 267.472656 C 224.011719 268.089844 222.6875 268.675781 221.351562 269.230469 C 220.011719 269.785156 218.664062 270.304688 217.300781 270.792969 C 215.9375 271.28125 214.5625 271.734375 213.175781 272.15625 C 211.792969 272.574219 210.394531 272.960938 208.992188 273.3125 C 207.585938 273.664062 206.175781 273.984375 204.753906 274.265625 C 203.335938 274.546875 201.910156 274.792969 200.476562 275.007812 C 199.042969 275.21875 197.609375 275.398438 196.167969 275.539062 C 194.726562 275.679688 193.28125 275.789062 191.835938 275.859375 C 190.390625 275.929688 188.941406 275.964844 187.496094 275.964844 C 186.046875 275.964844 184.601562 275.929688 183.15625 275.859375 C 181.707031 275.789062 180.265625 275.679688 178.824219 275.539062 C 177.382812 275.398438 175.945312 275.21875 174.515625 275.007812 C 173.082031 274.792969 171.65625 274.546875 170.234375 274.265625 C 168.816406 273.984375 167.402344 273.664062 166 273.3125 C 164.59375 272.960938 163.199219 272.574219 161.8125 272.15625 C 160.429688 271.734375 159.054688 271.28125 157.691406 270.792969 C 156.328125 270.304688 154.976562 269.785156 153.640625 269.230469 C 152.300781 268.675781 150.980469 268.089844 149.671875 267.472656 C 148.359375 266.851562 147.066406 266.199219 145.792969 265.519531 C 144.515625 264.835938 143.253906 264.121094 142.011719 263.378906 C 140.769531 262.632812 139.546875 261.859375 138.34375 261.054688 C 137.140625 260.25 135.957031 259.417969 134.792969 258.554688 C 133.632812 257.691406 132.492188 256.800781 131.371094 255.882812 C 130.25 254.964844 129.15625 254.019531 128.082031 253.046875 C 127.011719 252.074219 125.960938 251.078125 124.9375 250.054688 C 123.914062 249.027344 122.917969 247.980469 121.945312 246.90625 C 120.972656 245.835938 120.027344 244.738281 119.109375 243.621094 C 118.1875 242.5 117.296875 241.359375 116.4375 240.195312 C 115.574219 239.035156 114.742188 237.851562 113.9375 236.644531 C 113.132812 235.441406 112.355469 234.21875 111.613281 232.976562 C 110.867188 231.734375 110.15625 230.476562 109.472656 229.199219 C 108.789062 227.921875 108.140625 226.628906 107.519531 225.320312 C 106.902344 224.011719 106.316406 222.6875 105.761719 221.351562 C 105.207031 220.011719 104.683594 218.664062 104.199219 217.300781 C 103.710938 215.9375 103.253906 214.5625 102.835938 213.175781 C 102.414062 211.792969 102.027344 210.394531 101.675781 208.992188 C 101.324219 207.585938 101.007812 206.175781 100.726562 204.753906 C 100.445312 203.335938 100.195312 201.910156 99.984375 200.476562 C 99.769531 199.042969 99.59375 197.609375 99.453125 196.167969 C 99.308594 194.726562 99.203125 193.28125 99.132812 191.835938 C 99.0625 190.390625 99.027344 188.945312 99.027344 187.496094 C 99.027344 186.046875 99.0625 184.601562 99.132812 183.15625 C 99.203125 181.707031 99.308594 180.265625 99.453125 178.824219 C 99.59375 177.382812 99.769531 175.945312 99.984375 174.515625 C 100.195312 173.082031 100.445312 171.65625 100.726562 170.234375 C 101.007812 168.816406 101.324219 167.402344 101.675781 166 C 102.027344 164.59375 102.414062 163.199219 102.835938 161.8125 C 103.253906 160.429688 103.710938 159.054688 104.199219 157.691406 C 104.683594 156.328125 105.207031 154.976562 105.761719 153.640625 C 106.316406 152.300781 106.902344 150.980469 107.519531 149.671875 C 108.140625 148.359375 108.789062 147.066406 109.472656 145.792969 C 110.15625 144.515625 110.867188 143.253906 111.613281 142.011719 C 112.355469 140.769531 113.132812 139.546875 113.9375 138.34375 C 114.742188 137.140625 115.574219 135.957031 116.4375 134.792969 C 117.296875 133.632812 118.1875 132.492188 119.109375 131.371094 C 120.027344 130.25 120.972656 129.15625 121.945312 128.082031 C 122.917969 127.011719 123.914062 125.960938 124.9375 124.9375 C 125.960938 123.914062 127.011719 122.917969 128.082031 121.945312 C 129.15625 120.972656 130.25 120.027344 131.371094 119.109375 C 132.492188 118.1875 133.632812 117.296875 134.792969 116.4375 C 135.957031 115.574219 137.140625 114.742188 138.34375 113.9375 C 139.546875 113.132812 140.769531 112.355469 142.011719 111.613281 C 143.253906 110.867188 144.515625 110.15625 145.792969 109.472656 C 147.066406 108.789062 148.359375 108.140625 149.671875 107.519531 C 150.980469 106.902344 152.300781 106.316406 153.640625 105.761719 C 154.976562 105.207031 156.328125 104.683594 157.691406 104.199219 C 159.054688 103.710938 160.429688 103.257812 161.8125 102.835938 C 163.199219 102.414062 164.59375 102.027344 166 101.675781 C 167.402344 101.324219 168.816406 101.007812 170.234375 100.726562 C 171.65625 100.445312 173.082031 100.195312 174.515625 99.984375 C 175.945312 99.769531 177.382812 99.59375 178.824219 99.453125 C 180.265625 99.308594 181.707031 99.203125 183.15625 99.132812 C 184.601562 99.0625 186.046875 99.027344 187.496094 99.027344 C 188.941406 99.027344 190.390625 99.0625 191.835938 99.132812 C 193.28125 99.203125 194.726562 99.308594 196.167969 99.453125 C 197.609375 99.59375 199.042969 99.769531 200.476562 99.984375 C 201.910156 100.195312 203.335938 100.445312 204.753906 100.726562 C 206.175781 101.007812 207.585938 101.324219 208.992188 101.675781 C 210.394531 102.027344 211.792969 102.414062 213.175781 102.835938 C 214.5625 103.257812 215.9375 103.710938 217.300781 104.199219 C 218.664062 104.683594 220.011719 105.207031 221.351562 105.761719 C 222.6875 106.316406 224.011719 106.902344 225.320312 107.519531 C 226.628906 108.140625 227.921875 108.789062 229.199219 109.472656 C 230.476562 110.15625 231.734375 110.867188 232.976562 111.613281 C 234.21875 112.355469 235.441406 113.132812 236.644531 113.9375 C 237.851562 114.742188 239.035156 115.574219 240.195312 116.4375 C 241.359375 117.296875 242.5 118.1875 243.621094 119.109375 C 244.738281 120.027344 245.835938 120.972656 246.90625 121.945312 C 247.980469 122.917969 249.027344 123.914062 250.054688 124.9375 C 251.078125 125.960938 252.074219 127.011719 253.046875 128.082031 C 254.019531 129.15625 254.964844 130.25 255.882812 131.371094 C 256.800781 132.492188 257.691406 133.632812 258.554688 134.792969 C 259.417969 135.957031 260.25 137.140625 261.054688 138.34375 C 261.859375 139.546875 262.632812 140.769531 263.378906 142.011719 C 264.121094 143.253906 264.835938 144.515625 265.519531 145.792969 C 266.199219 147.066406 266.851562 148.359375 267.472656 149.671875 C 268.089844 150.980469 268.675781 152.300781 269.230469 153.640625 C 269.785156 154.976562 270.304688 156.328125 270.792969 157.691406 C 271.28125 159.054688 271.734375 160.429688 272.15625 161.8125 C 272.574219 163.199219 272.960938 164.59375 273.3125 166 C 273.664062 167.402344 273.984375 168.816406 274.265625 170.234375 C 274.546875 171.65625 274.792969 173.082031 275.007812 174.515625 C 275.21875 175.945312 275.398438 177.382812 275.539062 178.824219 C 275.679688 180.265625 275.789062 181.707031 275.859375 183.15625 C 275.929688 184.601562 275.964844 186.046875 275.964844 187.496094 Z M 275.964844 187.496094 " fill-opacity="1" fill-rule="nonzero"/></g><g clip-path="url(#e0df0f1fe5)"><path fill="#ffffff" d="M 180.261719 134.117188 C 179.003906 134.140625 177.996094 135.179688 178.011719 136.4375 L 178.011719 150.144531 C 178.003906 150.964844 178.433594 151.734375 179.144531 152.152344 C 179.859375 152.5625 180.734375 152.5625 181.449219 152.152344 C 182.164062 151.734375 182.589844 150.964844 182.582031 150.144531 L 182.582031 136.4375 C 182.589844 135.820312 182.351562 135.222656 181.914062 134.785156 C 181.476562 134.347656 180.878906 134.105469 180.261719 134.117188 Z M 159.707031 140.988281 C 158.78125 140.988281 157.949219 141.550781 157.59375 142.40625 C 157.246094 143.273438 157.449219 144.253906 158.121094 144.90625 L 167.257812 154.042969 C 167.828125 154.640625 168.6875 154.882812 169.480469 154.667969 C 170.285156 154.464844 170.910156 153.839844 171.113281 153.035156 C 171.328125 152.242188 171.085938 151.386719 170.488281 150.8125 L 161.351562 141.675781 C 160.921875 141.230469 160.332031 140.988281 159.707031 140.988281 Z M 200.816406 140.988281 C 200.21875 140.996094 199.65625 141.246094 199.246094 141.675781 L 190.105469 150.8125 C 189.507812 151.386719 189.265625 152.242188 189.480469 153.035156 C 189.6875 153.839844 190.3125 154.464844 191.113281 154.667969 C 191.910156 154.882812 192.765625 154.640625 193.335938 154.042969 L 202.476562 144.90625 C 203.152344 144.246094 203.351562 143.246094 202.984375 142.378906 C 202.617188 141.503906 201.761719 140.953125 200.816406 140.988281 Z M 224.101562 145.574219 C 222.449219 145.574219 220.789062 146.207031 219.53125 147.46875 L 175.726562 191.269531 C 175.726562 191.269531 169.042969 178.695312 165.695312 175.339844 C 159.851562 169.492188 148.542969 166.636719 145.5625 169.617188 L 141.457031 173.714844 L 154.378906 186.636719 L 164.304688 216.402344 L 182.242188 234.339844 C 188.742188 240.835938 199.273438 240.835938 205.769531 234.339844 L 230.953125 209.15625 C 233.480469 206.628906 233.480469 202.542969 230.953125 200.015625 C 228.429688 197.488281 224.339844 197.488281 221.816406 200.015625 L 224.101562 197.730469 C 226.625 195.207031 226.625 191.117188 224.101562 188.59375 C 221.574219 186.066406 217.488281 186.066406 214.960938 188.59375 L 217.246094 186.308594 C 219.773438 183.78125 219.773438 179.695312 217.246094 177.167969 C 214.71875 174.644531 210.632812 174.644531 208.105469 177.167969 L 228.667969 156.605469 C 231.195312 154.082031 231.195312 149.992188 228.667969 147.46875 C 227.410156 146.207031 225.75 145.574219 224.101562 145.574219 Z M 224.101562 145.574219 " fill-opacity="1" fill-rule="nonzero"/></g></svg>
    </div>
   
  );
};